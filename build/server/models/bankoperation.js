// Generated by CoffeeScript 1.7.1
var BankOperation, americano;

americano = require('americano');

module.exports = BankOperation = americano.getModel('bankoperation', {
  bankAccount: String,
  title: String,
  date: Date,
  amount: Number,
  raw: String,
  dateImport: Date
});

BankOperation.all = function(callback) {
  return BankOperation.request("all", callback);
};

BankOperation.allFromBankAccount = function(account, callback) {
  var params;
  params = {
    key: account.id
  };
  return BankOperation.request("allByBankAccount", params, callback);
};

BankOperation.allFromBankAccounts = function(accountNums, callback) {
  var params;
  params = {
    keys: accountNums
  };
  return BankOperation.request("allByBankAccount", params, callback);
};

BankOperation.allFromBankAccountDate = function(account, callback) {
  var params;
  params = {
    startkey: [account.accountNumber + "0"],
    endkey: [account.accountNumber],
    descending: true
  };
  return BankOperation.request("allByBankAccountAndDate", params, callback);
};

BankOperation.allLike = function(operation, callback) {
  var date, params;
  date = new Date(operation.date).toISOString();
  params = {
    key: [operation.bankAccount, date, operation.amount, operation.raw]
  };
  return BankOperation.request("allLike", params, callback);
};

BankOperation.destroyByAccount = function(accountNum, callback) {
  return BankOperation.requestDestroy("allByBankAccount", {
    key: accountNum
  }, callback);
};
